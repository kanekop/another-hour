
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Another Hour Clock</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="/css/components.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;600&display=swap">
  <style>
    .app-container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background: #f5f5f5;
    }

    .nav-header {
      background: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      padding: 1rem;
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 1000;
    }

    .nav-list {
      display: flex;
      gap: 1.5rem;
      list-style: none;
      margin: 0;
      padding: 0;
      justify-content: center;
    }

    .nav-item a {
      color: #333;
      text-decoration: none;
      font-size: 1.1rem;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      transition: background-color 0.3s;
    }

    .nav-item a:hover {
      background-color: #f0f0f0;
    }

    .nav-item a.active {
      background-color: #e0e0e0;
      font-weight: 500;
    }

    #content {
      margin-top: 4rem;
      padding: 1rem;
      flex: 1;
    }

    @media (max-width: 768px) {
      .nav-list {
        flex-wrap: wrap;
        justify-content: flex-start;
      }

      .nav-item {
        flex: 1 1 auto;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header class="nav-header">
      <nav>
        <ul class="nav-list">
          <li class="nav-item"><a href="#main-clock" class="active">Main Clock</a></li>
          <li class="nav-item"><a href="#world-clock">World Clock</a></li>
          <li class="nav-item"><a href="#stopwatch">Stopwatch</a></li>
          <li class="nav-item"><a href="#timer">Timer</a></li>
        </ul>
      </nav>
    </header>

    <main id="content">
      <!-- Content will be loaded here -->
    </main>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const content = document.getElementById('content');
      const navLinks = document.querySelectorAll('.nav-item a');
      let currentPage = 'main-clock';

      async function loadPage(pageName) {
        try {
          const response = await fetch(`/pages/${pageName}.html`);
          const html = await response.text();
          const tempDiv = document.createElement('div');
          tempDiv.innerHTML = html;
          
          // Extract content between <body> tags
          const bodyContent = tempDiv.querySelector('body').innerHTML;
          content.innerHTML = bodyContent;

          // Load and execute scripts
          const scripts = tempDiv.querySelectorAll('script');
          const promises = Array.from(scripts).map(script => {
            return new Promise((resolve, reject) => {
              if (script.src) {
                const newScript = document.createElement('script');
                newScript.src = script.src;
                newScript.type = script.type || 'text/javascript';
                newScript.onload = resolve;
                newScript.onerror = reject;
                document.body.appendChild(newScript);
              } else {
                try {
                  eval(script.textContent);
                  resolve();
                } catch (error) {
                  reject(error);
                }
              }
            });
          });

          await Promise.all(promises).catch(error => {
            console.error('Error loading scripts:', error);
          });

          // Update active state
          navLinks.forEach(link => {
            link.classList.toggle('active', link.getAttribute('href') === `#${pageName}`);
          });

          currentPage = pageName;
        } catch (error) {
          console.error('Error loading page:', error);
        }
      }

      // Handle navigation
      navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const pageName = link.getAttribute('href').substring(1);
          loadPage(pageName);
        });
      });

      // Load initial page
      loadPage(currentPage);
    });
  </script>
</body>
</html>
