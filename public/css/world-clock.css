/* public/css/world-clock.css */

#world-clocks-container {
  display: grid;
  gap: 1vw; /* ビューポート幅に応じたgapで、より柔軟に */
  width: 100%;
  margin-top: 20px;
  padding: 1vw; /* コンテナにもビューポートに応じたパディング */
  box-sizing: border-box;

  /* デフォルト: 横6列。各列は利用可能なスペースを均等に分割 */
  grid-template-columns: repeat(6, minmax(0, 1fr));
}


/* デフォルト (ライトモード) の .world-clock-item スタイル */
.world-clock-item {
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 1.5vmin; /* アイテム内のパディングもビューポートの最小次元に応じて調整 */
  background: #f0f0f0;
  color: #1a1a1a;
  text-align: center;
  transition: box-shadow 0.2s ease-in-out, background-color 0.3s ease, color 0.3s ease;
  overflow: hidden; /* 内容がはみ出るのを防ぐ */
  display: flex;
  flex-direction: column;
  justify-content: space-around; /* アイテム内の要素を均等配置 */
  align-items: center; /* アイテム内の要素を中央揃え */
}

.world-clock-item h3 {
  margin-top: 0;
  font-size: clamp(0.75em, 2vmin, 1em); /* フォントサイズをレスポンシブに */
  color: #c28000;
  margin-bottom: 0.5vmin;
  white-space: nowrap; /* 都市名が長い場合に改行させない (必要に応じて) */
  overflow: hidden;    /* はみ出た部分は隠す */
  text-overflow: ellipsis; /* はみ出た部分を ... で表示 */
  max-width: 100%;     /* 親要素の幅を超えないように */
}

.ah-time-display-main {
  font-size: clamp(0.9em, 2.5vmin, 1.3em); /* フォントサイズをレスポンシブに */
  font-weight: bold;
  color: #1a1a1a;
  margin: 0.5vmin 0;
}

.normal-time-display-sub {
  font-size: clamp(0.7em, 1.8vmin, 0.8em); /* フォントサイズをレスポンシブに */
  color: #555;
  margin-bottom: 0.5vmin;
}

/* --- AH状態の .world-clock-item の特別スタイル --- */
/* これが Fernando de Noronha のようなAH時間帯のアイテムに適用される */
.world-clock-item.blinking-ah {
  background: #222;     /* ★ダークモードの背景色 */
  border-color: #444;   /* ★ダークモードの境界線色 */
  color: white;          /* ★ダークモードの基本文字色 */
  animation: avanzado-ah-blink 2s ease-in-out infinite; /* ★新しいアニメーション名 (後述) */
}

.world-clock-item.blinking-ah h3 {
  color: #ffc107;     /* ダークモード時の都市名の色 (メインクロックのinverted時のah-sectorに近い黄色) */
}

.world-clock-item.blinking-ah .ah-time-display-main {
  color: white;          /* ダークモード時のAH時間の色 */
}

.world-clock-item.blinking-ah .normal-time-display-sub {
  color: #aaa;          /* ダークモード時の通常時間の色 */
}

/* AH状態のアイテム内のアナログ時計のスタイル */
.world-clock-item.blinking-ah .analog-face-world {
  fill: #333;           /* ダークモードの盤面 */
  stroke: #555;         /* ダークモードの盤面枠線 */
}
.world-clock-item.blinking-ah .analog-ticks-world line {
    stroke: #777;       /* ダークモードの目盛り */
}
.world-clock-item.blinking-ah .analog-hand-world.hour-world,
.world-clock-item.blinking-ah .analog-hand-world.minute-world {
  stroke: #e0e0e0;     /* ダークモードの時針・分針 */
}
.world-clock-item.blinking-ah .analog-hand-world.second-world {
  stroke: #ff6b6b;     /* ダークモードの秒針 */
}
.world-clock-item.blinking-ah .analog-center-world {
  fill: #e0e0e0;       /* ダークモードの中央ドット */
}
/* --- AH状態の .world-clock-item の特別スタイル END --- */


/* 点滅アニメーションの定義 (名前を変更して、opacity以外の効果も考慮できるように) */
@keyframes avanzado-ah-blink {
  0%   { box-shadow: 0 0 5px rgba(255, 193, 7, 0.3); opacity: 1; }
  50%  { box-shadow: 0 0 15px rgba(255, 193, 7, 0.7); opacity: 0.7; } /* 少し明るく、影も強調 */
  100% { box-shadow: 0 0 5px rgba(255, 193, 7, 0.3); opacity: 1; }
}


/* --- メディアクエリによる列数調整 --- */

/* 縦長の画面、または一般的なタブレット幅程度まで (横6列ではアイテムが小さくなりすぎる場合) */
@media (max-width: 1024px) { /* ブレークポイントは適宜調整 */
  #world-clocks-container {
    grid-template-columns: repeat(4, minmax(0, 1fr)); /* 横4列 */
  }
}

/* スマートフォンの縦持ちなど、さらに狭い画面 */
@media (max-width: 767px) {
  #world-clocks-container {
    grid-template-columns: repeat(3, minmax(0, 1fr)); /* 横3列 */
    gap: 1.5vw;
  }
  .world-clock-item {
    padding: 1vmin;
  }
}

/* 非常に狭い画面 (例: 3列でも厳しい場合) */
@media (max-width: 480px) {
  #world-clocks-container {
    grid-template-columns: repeat(2, minmax(0, 1fr)); /* 横2列 */
    gap: 2vw;
  }
  /* 2列の場合、アイテム内のフォントや時計サイズをさらに調整することも検討 */
  .world-clock-item h3 {
    font-size: clamp(0.7em, 2.5vmin, 0.9em);
  }
  .ah-time-display-main {
    font-size: clamp(0.8em, 3vmin, 1.1em);
  }
  .normal-time-display-sub {
    font-size: clamp(0.65em, 2vmin, 0.75em);
  }
  .analog-clock-world {
    width: clamp(40px, 12vmin, 60px);
    height: clamp(40px, 12vmin, 60px);
  }
}


/* --- デフォルトのアナログ時計のスタイル (body が inverted でない場合) --- */
.analog-clock-world {
  width: clamp(50px, 10vmin, 70px);  /* アナログ時計のサイズをレスポンシブに */
  height: clamp(50px, 10vmin, 70px);
  margin: 0.5vmin auto 0;
  display: block;
}

.analog-clock-world .analog-face-world {
  fill: #ddd;
  stroke: #bbb;
  stroke-width: 2;
}

.analog-clock-world .analog-ticks-world line {
    stroke: #888;
    stroke-width: 2;
}

.analog-clock-world .analog-hand-world {
  stroke-linecap: round;
  transform-origin: 100px 100px;
}

.analog-clock-world .analog-hand-world.hour-world {
  stroke: #333;
  stroke-width: 6;
}

.analog-clock-world .analog-hand-world.minute-world {
  stroke: #333;
  stroke-width: 4;
}

.analog-clock-world .analog-hand-world.second-world {
  stroke: #c00000;
  stroke-width: 2;
}

.analog-clock-world .analog-center-world {
  fill: #333;
}

/* ユーザーのローカルタイムゾーンの都市名のスタイル */
.world-clock-item h3.user-local-timezone-city {
  color: #D32F2F; /* 例: やや暗めの赤色 */
  font-weight: bold;
  /* 必要に応じて他のスタイルも追加できます */
  /* 例: text-decoration: underline; */
  /* 例: background-color: rgba(255, 0, 0, 0.1); padding: 2px 4px; border-radius: 3px; */
}

/* AH状態で背景が暗くなっている場合のローカルタイムゾーン都市名のスタイル */
/* blinking-ah クラスを持つ親要素内の .user-local-timezone-city に適用 */
.world-clock-item.blinking-ah h3.user-local-timezone-city {
  color: #FF5252; /* 例: 明るめの赤色 (暗い背景で目立つように) */
  /* font-weight: bold; は通常時と共通であれば再指定不要 */
}

/* body.inverted 時のスタイルは、もしサイト全体でダークモード切り替えを残す場合に必要になりますが、 */
/* World Clockページでは body.inverted を操作しないため、以下のブロックは World Clockページでは直接効きません。 */
/* ただし、他のページ (main clockなど) とCSSを共通化している部分がある場合は残しておきます。 */
/* もし World Clock専用のCSSであれば、body.inverted を前提としたスタイルは不要になるかもしれません。 */
/* 今回は、AHアイテムの反転を .blinking-ah クラスで直接制御するため、 */
/* body.inverted に依存しない形にしています。 */

/* body.inverted .world-clock-item { ... } などのブロックは、 */
/* 今回の .world-clock-item.blinking-ah で上書きされるか、 */
/* あるいは World Clockページでは body.inverted にならないため影響しません。 */