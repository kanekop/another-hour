# Solar Mode: A Deep Dive

## 📋 概要 (Overview)

Solar Mode（太陽光モード）は、**地球の自然なリズムとあなたの生活を同期させる**ことを目的とした、ダイナミックな時間設計モードです。

選択した都市の**実際の日の出と日の入り**を基準に、一日を「昼（Day）」と「夜（Night）」の2つのフェーズに分割します。そして、それぞれのフェーズの時間の長さを、あなたの好みに合わせて自由に「デザイン（伸縮）」することができます。

### コアコンセプト：自然のリズムを、自分のものにする

このモードは、以下のような思想に基づいています。

-   **昼は活動的に**: 日が出ている時間は、たとえ実際の昼が短くても、長く感じられるように時間を引き伸ばす。
-   **夜は穏やかに**: 日が沈んだ後は、たとえ実際の夜が長くても、短く凝縮して、休息や趣味の時間を効率的に過ごす。

このモードを使えば、例えば冬の短い日照時間を長く感じさせたり、夏の長い夜をコンパクトにまとめたりと、季節や場所に応じて自分の体感時間を最適化できます。

## 💡 基本的な考え方 (The Core Idea)

このモードの鍵は、「**現実の時間」と「デザインされた時間」を、昼と夜で別々に考える**ことです。

1.  **現実の昼と夜 (Actual Day & Night)**
    - `SunCalc.js`ライブラリを使用し、選択された都市のその日の正確な日の出・日の入り時刻を取得します。
    - **例 (東京)**: 日の出が`05:30`、日の入りが`18:30`だとすると...
        - **現実の昼**: `13時間`
        - **現実の夜**: `11時間`（残りの時間）

2.  **デザインされた昼と夜 (Designed Day & Night)**
    - あなたが「昼」と「夜」をそれぞれ何時間と感じたいかを設定します。
    - **例**: 昼を長く感じたいので、**「デザインされた昼」を16時間**に設定します。
        - **デザインされた夜**: `24 - 16 = 8時間` に自動で決まります。

### 「時間の魔法」：昼と夜、それぞれのスケーリング

ここが最も重要なポイントです。**昼と夜で、それぞれ異なるスケールファクターが適用されます。**

-   **昼のスケーリング**:
    - **進めるべき時間**: `デザインされた昼`（16時間）
    - **使える現実の時間**: `現実の昼`（13時間）
    - **スケールファクター**: `16 ÷ 13 ≒ 1.23倍`
    - → 現実の日の出から日の入りまでの間、時間は**約1.23倍速**で進みます。

-   **夜のスケーリング**:
    - **進めるべき時間**: `デザインされた夜`（8時間）
    - **使える現実の時間**: `現実の夜`（11時間）
    - **スケールファクター**: `8 ÷ 11 ≒ 0.73倍`
    - → 現実の日の入りから次の日の出までの間、時間は**約0.73倍速**でゆっくり進みます。

## ⚙️ 計算の仕組み (The Formula)

数式で見てみましょう。

### 1. 現実の昼夜の長さを計算
\[
\text{現実の昼の長さ} = \text{日の入り時刻} - \text{日の出時刻}
\]
\[
\text{現実の夜の長さ} = 24\text{時間} - \text{現実の昼の長さ}
\]

### 2. デザインされた昼夜の長さを設定
\[
\text{デザインされた昼の長さ} = \text{Day Hoursスライダーの値 (H)}
\]
\[
\text{デザインされた夜の長さ} = 24\text{時間} - H
\]

### 3. スケールファクターの計算
\[
\text{昼のスケールファクター} = \frac{\text{デザインされた昼の長さ}}{\text{現実の昼の長さ}}
\]
\[
\text{夜のスケールファクター} = \frac{\text{デザインされた夜の長さ}}{\text{現実の夜の長さ}}
\]

## 🚶‍♀️ 具体的なシナリオ (A Walkthrough)

**設定**:
- **選択した都市**: **ロンドン (London)**
- **デザインしたい昼の長さ (Day Hours)**: **15時間**

---

#### ステップ1: ロンドンの太陽情報を取得する

- ある日のロンドンの時刻を`SunCalc.js`で計算します。
    - **日の出 (Sunrise)**: `07:30`
    - **日の入り (Sunset)**: `16:30`
- これにより、現実の昼と夜の長さが決まります。
    - **現実の昼**: `16:30 - 07:30 = 9時間`
    - **現実の夜**: `24 - 9 = 15時間`

#### ステップ2: スケールファクターを計算する

- **昼の計算**:
    - デザインされた昼: `15時間`
    - 現実の昼: `9時間`
    - **昼のスケールファクター**: `15 ÷ 9 ≒ 1.67倍`

- **夜の計算**:
    - デザインされた夜: `24 - 15 = 9時間`
    - 現実の夜: `15時間`
    - **夜のスケールファクター**: `9 ÷ 15 = 0.6倍`

#### ステップ3: 1日の流れ

- **`00:00`～`07:30` (現実の夜の前半)**
    - 時間は**0.6倍速**でゆっくり進みます。
    - `Designed Time`の時計もそれに合わせてゆっくり進みます。

- **`07:30`～`16:30` (現実の昼)**
    - 時間は**1.67倍速**で速く進みます。
    - この9時間で、`Designed Time`は一気に15時間分を進みます。

- **`16:30`～`24:00` (現実の夜の後半)**
    - 時間は再び**0.6倍速**に戻り、ゆっくりと一日を終えます。

## 🎨 UI/UX Guidelines

- **都市選択 (City)**: プルダウンメニューから主要な都市を選択します。
- **情報表示 (Solar Info)**:
    - 選択した都市の「日の出」「日の入り」「昼の長さ」が自動で計算され、表示されます。
- **Day Hours スライダー**:
    - デザインしたい「昼」の長さを1〜23時間の間で設定します。
    - **デフォルト値**: ページ読み込み時や都市変更時、その都市の実際の「昼の長さ」がスライダーの初期値として設定されます。ユーザーはそこから微調整を始めることができます。
- **表示**:
    - `Designed Time`中は、現在のフェーズ（Day/Night）と、適用されているスケールファクターが明確に表示されます。

このモードは、天体の動きという普遍的なリズムを、あなたのライフスタイルに合わせて再解釈するための強力なツールです。

## 🎯 Success Metrics

- 位置情報の設定完了率
- 季節による使用パターンの変化
- 睡眠の質の改善（自己申告）
- 自然光利用時間の増加

## 💭 Philosophy

Solar Modeは、人類が失った「自然との時間的つながり」を回復させます。電気照明が普及する前、人々の生活は太陽とともにありました。このモードは、現代のテクノロジーを使って、その古代の知恵を再解釈します。

「時間は均一ではない」という真実を受け入れることで、私たちは季節の変化を身体で感じ、自然のリズムと調和した生活を送ることができます。夏の長い昼を有効に使い、冬の長い夜を休息と内省の時間として受け入れる—これが Solar Mode の提案する新しい時間との関係です。

## 📝 Notes

- 極地に近い地域では、白夜や極夜の処理が必要
- 都市生活者向けに「仮想太陽」モードの実装も検討
- 将来的には、月の満ち欠けも組み込んだ「Lunar-Solar Mode」への拡張も可能
- 天候データと連携し、「体感日照時間」での計算も検討

---

*Next: [Implementation Guide →](../implementation-guide.md)*