"use strict";(()=>{function u(r,e,t){if(e<=0)throw new Error("designed24Duration must be greater than 0");let a=(r.getTime()-t.getTime())/(1e3*60*60),s,i;if(a<e){let d=24/e,o=a*d;s=o*30%360,i=o*60%60*6}else{let d=a-e,o=24-e;s=d%o*30%360,i=d%o*60%60*6}return{hourAngle:s,minuteAngle:i}}function g(r,e,t){if(e<=0)throw new Error("designed24Duration must be greater than 0");let a=(r.getTime()-t.getTime())/(1e3*60*60),s,i;if(a<e){let d=24/e,o=a*d;s=Math.floor(o)%24,i=Math.floor(o%1*60)}else{let d=a-e;s=Math.floor(d)%24,i=Math.floor(d%1*60)}return{hours:s,minutes:i}}function p(r,e,t){if(e<=0)throw new Error("designed24Duration must be greater than 0");return(r.getTime()-t.getTime())/(1e3*60*60)<e}var l=class{constructor(){this.settings={duration:parseInt(localStorage.getItem("ah_duration")||"16"),startHour:parseInt(localStorage.getItem("ah_start_hour")||"6")}}save(e){this.settings={...this.settings,...e},localStorage.setItem("ah_duration",this.settings.duration.toString()),localStorage.setItem("ah_start_hour",this.settings.startHour.toString())}getSettings(){return this.settings}getD24StartTime(){let e=new Date,t=new Date(e);return t.setHours(this.settings.startHour,0,0,0),e<t&&t.setDate(t.getDate()-1),t}};var c=class{constructor(e){this.animationFrameId=null;this.settings=e,this.elements={hourHand:document.getElementById("hour-hand"),minuteHand:document.getElementById("minute-hand"),secondHand:document.getElementById("second-hand"),ahTime:document.getElementById("ah-time"),realTime:document.getElementById("real-time"),phaseName:document.getElementById("phase-name"),body:document.body}}start(){this.animationFrameId===null&&this.update()}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}update(){let e=new Date,t=this.settings.getSettings(),n=this.settings.getD24StartTime(),a=u(e,t.duration,n),s=g(e,t.duration,n),i=p(e,t.duration,n);this.updateAnalogClock(a,e),this.updateDigitalDisplay(s,e),this.updatePhase(i),this.animationFrameId=requestAnimationFrame(()=>this.update())}updateAnalogClock(e,t){let{hourHand:n,minuteHand:a,secondHand:s}=this.elements;n.style.transform=`rotate(${e.hourAngle}deg)`,a.style.transform=`rotate(${e.minuteAngle}deg)`;let i=t.getSeconds()*6+t.getMilliseconds()*.006;s.style.transform=`rotate(${i}deg)`}updateDigitalDisplay(e,t){let{ahTime:n,realTime:a}=this.elements,s=String(e.hours).padStart(2,"0"),i=String(e.minutes).padStart(2,"0"),d=String(t.getSeconds()).padStart(2,"0");n.textContent=`${s}:${i}:${d}`;let o=String(t.getHours()).padStart(2,"0"),h=String(t.getMinutes()).padStart(2,"0"),T=String(t.getSeconds()).padStart(2,"0");a.textContent=`Real: ${o}:${h}:${T}`}updatePhase(e){let{phaseName:t,body:n}=this.elements;e?(t.textContent="Designed 24",n.classList.remove("another-hour-phase")):(t.textContent="Another Hour",n.classList.add("another-hour-phase"))}},m=class{constructor(e){this.settings=e,this.modal=document.getElementById("settings-modal"),this.setupEventListeners()}setupEventListeners(){let e=document.getElementById("settings-btn"),t=document.getElementById("save-settings"),n=document.getElementById("cancel-settings");e.addEventListener("click",()=>this.open()),t.addEventListener("click",()=>this.save()),n.addEventListener("click",()=>this.close()),this.modal.addEventListener("click",a=>{a.target===this.modal&&this.close()})}open(){let e=this.settings.getSettings(),t=document.getElementById("duration-input"),n=document.getElementById("start-hour-input");t.value=e.duration.toString(),n.value=e.startHour.toString(),this.modal.classList.remove("hidden")}close(){this.modal.classList.add("hidden")}save(){let e=document.getElementById("duration-input"),t=document.getElementById("start-hour-input"),n=parseInt(e.value),a=parseInt(t.value);n>=1&&n<=23&&a>=0&&a<=23&&(this.settings.save({duration:n,startHour:a}),this.close())}};function E(){S();let r=new l,e=new c(r);new m(r),e.start()}function S(){let r=document.getElementById("clock-ticks");if(r)for(let e=0;e<12;e++){let t=e*30-90,n=10,a=100+85*Math.cos(t*Math.PI/180),s=100+85*Math.sin(t*Math.PI/180),i=100+(95-n)*Math.cos(t*Math.PI/180),d=100+(95-n)*Math.sin(t*Math.PI/180),o=document.createElementNS("http://www.w3.org/2000/svg","line");o.setAttribute("x1",a.toString()),o.setAttribute("y1",s.toString()),o.setAttribute("x2",i.toString()),o.setAttribute("y2",d.toString()),o.setAttribute("class","clock-tick"),r.appendChild(o)}}document.addEventListener("DOMContentLoaded",E);})();
