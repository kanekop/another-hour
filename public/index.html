
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Another Hour Clock</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="/css/components.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;600&display=swap">
  <style>
    .app-container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    .navigation-bar {
      background: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      padding: 1rem;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
    }

    .nav-list {
      display: flex;
      gap: 2rem;
      justify-content: center;
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .nav-link {
      color: #333;
      text-decoration: none;
      font-weight: 500;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      transition: background-color 0.3s;
    }

    .nav-link:hover,
    .nav-link.active {
      background-color: #f0f0f0;
    }

    .content-container {
      margin-top: 4rem;
      padding: 2rem;
      flex-grow: 1;
    }

    @media (max-width: 768px) {
      .nav-list {
        gap: 1rem;
        flex-wrap: wrap;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <nav class="navigation-bar">
      <ul class="nav-list">
        <li><a href="#/" class="nav-link" data-page="main">Main Clock</a></li>
        <li><a href="#/world" class="nav-link" data-page="world">World Clock</a></li>
        <li><a href="#/stopwatch" class="nav-link" data-page="stopwatch">Stopwatch</a></li>
        <li><a href="#/timer" class="nav-link" data-page="timer">Timer</a></li>
      </ul>
    </nav>
    <main class="content-container" id="main-content"></main>
  </div>

  <script>
    class Router {
      constructor() {
        this.routes = {
          '/': '/pages/main-clock.html',
          '/world': '/pages/world-clock.html',
          '/stopwatch': '/pages/stopwatch.html',
          '/timer': '/pages/timer.html'
        };
        
        window.addEventListener('hashchange', () => this.handleRoute());
        window.addEventListener('load', () => this.handleRoute());
      }

      async handleRoute() {
        const hash = window.location.hash || '#/';
        const path = this.routes[hash.slice(1)] || this.routes['/'];
        
        try {
          const response = await fetch(path);
          const html = await response.text();
          
          const tempDiv = document.createElement('div');
          tempDiv.innerHTML = html;
          
          // Extract content from body
          const content = Array.from(tempDiv.querySelector('body').children);
          const mainContent = document.getElementById('main-content');
          mainContent.innerHTML = '';
          content.forEach(element => mainContent.appendChild(element));

          // Update active state
          document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === hash) {
              link.classList.add('active');
            }
          });

          // Load and execute scripts
          const scripts = tempDiv.querySelectorAll('script');
          const promises = Array.from(scripts).map(script => {
            return new Promise((resolve, reject) => {
              if (script.src) {
                const newScript = document.createElement('script');
                newScript.src = script.src;
                newScript.type = script.type || 'text/javascript';
                newScript.onload = resolve;
                newScript.onerror = reject;
                document.body.appendChild(newScript);
              } else {
                try {
                  eval(script.textContent);
                  resolve();
                } catch (error) {
                  reject(error);
                }
              }
            });
          });

          await Promise.all(promises).catch(error => {
            console.error('Error loading scripts:', error);
          });

        } catch (error) {
          console.error('Error loading page:', error);
        }
      }
    }

    new Router();
  </script>
</body>
</html>
