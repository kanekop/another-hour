import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

export async function getStaticPaths() {
  const stories = await getCollection('stories');
  return stories.map(story => ({
    params: { slug: story.slug },
    props: { story },
  }));
}

const { story } = Astro.props;
const { Content } = await story.render();

<Layout title={`${story.data.title} - Another Hour`}>
    <Header />
    <main class="py-12 px-8">
        <article class="max-w-3xl mx-auto prose lg:prose-xl">
            <h1 class="text-4xl font-bold mb-4">{story.data.title}</h1>
            <div class="text-gray-500 mb-8">
                <span>By {story.data.author}</span> | 
                <time datetime={story.data.date.toISOString()}>
                    {new Date(story.data.date).toLocaleDateString('ja-JP')}
                </time>
            </div>
            <Content />
        </article>
    </main>
    <Footer />
</Layout> 