<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Google Calendar Auth Test - Another Hour</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="/css/components.css">
  <link rel="stylesheet" href="/css/auth-test.css">
</head>

<body>
  <a href="/" class="back-link">Back</a>

  <div class="test-container">
    <h1>ðŸ§ª Google Calendar Auth Flow Test</h1>

    <!-- Step 1: Environment Check -->
    <div class="test-section">
      <h2>Step 1: Environment Check</h2>
      <p>Check if OAuth credentials are configured</p>
      <button class="test-button" onclick="checkEnvironment()">Check Environment</button>
      <div id="env-status"></div>
    </div>

    <!-- Step 2: Auth URL Generation -->
    <div class="test-section">
      <h2>Step 2: Generate Auth URL</h2>
      <p>Generate Google OAuth authorization URL</p>
      <button class="test-button" onclick="getAuthUrl()">Get Auth URL</button>
      <div id="auth-url-status"></div>
    </div>

    <!-- Step 3: Start OAuth Flow -->
    <div class="test-section">
      <h2>Step 3: Start OAuth Flow</h2>
      <p>Open Google OAuth in a popup window</p>
      <button class="test-button" onclick="startOAuthFlow()" id="start-oauth-btn">Start OAuth Flow</button>
      <div id="oauth-status"></div>
    </div>

    <!-- Step 4: Check Auth Status -->
    <div class="test-section">
      <h2>Step 4: Check Authentication Status</h2>
      <p>Verify if authentication was successful</p>
      <button class="test-button" onclick="checkAuthStatus()">Check Status</button>
      <div id="auth-check-status"></div>
    </div>

    <!-- Step 5: Test API Calls -->
    <div class="test-section">
      <h2>Step 5: Test Calendar API</h2>
      <p>Test actual Google Calendar API calls</p>
      <button class="test-button" onclick="getCalendarList()">Get Calendar List</button>
      <button class="test-button" onclick="getEvents()">Get Events (This Week)</button>
      <div id="api-test-status"></div>
      <div id="api-response"></div>
    </div>

    <!-- Log Output -->
    <div class="test-section">
      <h2>Debug Log</h2>
      <div class="log-output" id="debug-log"></div>
    </div>
  </div>

  <script src="/js/auth-test.js"></script>
</body>

</html>